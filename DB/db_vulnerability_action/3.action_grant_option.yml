# 3. Revoke GRANT OPTION from specific users
- name: Change password for 'test' user to satisfy password policy
  mysql_user:
    name: 'test'
    host: 'localhost'
    password: "Test123!@#"
    login_user: root
    login_password: "rockylinux"
    
- name: Revoke GRANT OPTION from users
  mysql_user:
    login_user: root
    login_password: "rockylinux"
    name: "{{ item.name }}"
    host: "{{ item.host }}"
    priv: "*.*:ALL,GRANT"
    state: present
    append_privs: no
  loop:
    - { name: 'test', host: 'localhost' }
  register: revoke_result

- name: Verify revoked privileges
  debug:
    var: revoke_result
