# 2. Set MySQL password validation policy
- name: Set MySQL validate_password_policy to STRONG
  mysql_query:
    login_user: root
    login_password: "{{ mysql_root_password }}"
    query: "SET GLOBAL validate_password_policy = 'STRONG';"

- name: Set minimum password length to 8
  mysql_variables:
    variable: validate_password_length
    value: 8
    login_user: root
    login_password: "{{ mysql_root_password }}"

- name: Set other password validation requirements
  mysql_variables:
    variable: "{{ item.variable }}"
    value: "{{ item.value }}"
    login_user: root
    login_password: "{{ mysql_root_password }}"
  loop:
    - { variable: 'validate_password_mixed_case_count', value: 1 }
    - { variable: 'validate_password_number_count', value: 1 }
    - { variable: 'validate_password_special_char_count', value: 1 }
