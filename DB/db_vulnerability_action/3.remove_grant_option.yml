---
  - name: Remove GRANT OPTION from users in MySQL
    hosts: mysql_servers
    become: yes
    vars:
	    mysql_root_password: "rockylinux"
    tasks:
      - name: Revoke GRANT OPTION from users
        mysql_user:
          login_user: root
          login_password: "{{ mysql_root_password }}"
          name: "{{ item.name }}"
          host: "{{ item.host }}"
          priv: "*.*:ALL,GRANT"
          state: present
          append_privs: no
        loop:
          - { name: 'test', host: 'localhost' }
        register: revoke_result
  
      - name: Verify revoked privileges
        debug:
          var: revoke_result
