# 8. Check and activate MySQL logging
- name: Enable General log
  mysql_query:
    login_user: root
    login_password: "rockylinux"
    query: "SET GLOBAL general_log = 'ON';"

- name: Set General log file path
  mysql_query:
    login_user: root
    login_password: "rockylinux"
    query: "SET GLOBAL general_log_file = '/var/log/mysql/mysql.log';"

- name: Enable Slow query log
  mysql_query:
    login_user: root
    login_password: "rockylinux"
    query: "SET GLOBAL slow_query_log = 'ON';"

- name: Set Slow query log file path
  mysql_query:
    login_user: root
    login_password: "rockylinux"
    query: "SET GLOBAL slow_query_log_file = '/var/log/mysql/mysql-slow.log';"

- name: Set Long query time to 1 second
  mysql_query:
    login_user: root
    login_password: "rockylinux"
    query: "SET GLOBAL long_query_time = 1;"
